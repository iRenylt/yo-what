<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ren's Archive // Registro de Cartas</title>
  <link rel="icon" href="https://i.imgur.com/aoMCu2s.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: radial-gradient(circle at top, #0b0b12, #000);
      color: #fff;
      font-family: 'Playfair Display', serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    /* üåå Estrellas */
    .stars {
      position: fixed;
      width: 100%;
      height: 100%;
      background: transparent url('https://www.transparenttextures.com/patterns/stardust.png') repeat;
      animation: starsMove 200s linear infinite;
      z-index: 1;
      opacity: 0.4;
    }

    @keyframes starsMove {
      from {background-position: 0 0;}
      to {background-position: -2000px 2000px;}
    }

    header {
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      padding: 15px 20px;
      text-align: center;
      animation: fadeIn 1.5s ease-out;
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
      z-index: 5;
    }

    header h1 { font-size: 1.5rem; margin: 0; }

    nav {
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      justify-content: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      flex-wrap: wrap;
      z-index: 5;
    }

    nav a {
      color: #fff;
      text-decoration: none;
      font-size: 0.85rem;
      margin: 5px 12px;
      padding: 6px 10px;
      transition: all 0.3s ease;
      border: 1px solid transparent;
      border-radius: 10px;
    }

    nav a:hover {
      background: transparent;
      border: 1px solid #fff;
      transform: scale(1.05);
    }

    .container {
      flex: 1;
      display: flex;
      width: 100%;
      position: relative;
      z-index: 2;
      animation: fadeIn 2.5s ease;
      padding: 2rem;
      flex-direction: row;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .side {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 15px;
      background: rgba(255,255,255,0.02);
      padding: 1.5rem;
      margin: 10px;
      text-align: center;
      min-height: 300px;
    }

    .media-container {
      width: 100%;
      max-width: 250px;
      margin-top: 15px;
      border-radius: 15px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.3);
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
      background: #000;
      aspect-ratio: 1/1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .media-container img, 
    .media-container video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .side p { font-size: 1.1rem; opacity: 0.9; margin: 10px 0; line-height: 1.4; }

    .center {
      flex: 1.2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .center button {
      background: transparent;
      border: 1px solid #fff;
      color: #fff;
      font-size: 1.1rem;
      padding: 0.8rem 1.5rem;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.4s ease;
      font-family: 'Playfair Display', serif;
    }

    .center button:hover {
      background: #fff;
      color: #000;
      transform: scale(1.05);
    }

    body.locked {
        overflow: hidden !important;
        height: 100vh !important;
    }

    body.locked > *:not(.page-lock):not(.stars) {
        display: none !important;
    }

    .page-lock {
        position: fixed;
        inset: 0;
        background: #000;
        z-index: 99999;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .lock-box {
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 40px;
        border-radius: 20px;
        background: rgba(10, 10, 15, 0.8);
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
        color: #fff;
    }

    .lock-box h2 { font-weight: 400; margin-bottom: 20px; letter-spacing: 2px; text-transform: uppercase; }
    .lock-box input {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #fff;
        padding: 12px;
        border-radius: 10px;
        outline: none;
        text-align: center;
        font-size: 1.1rem;
        margin-bottom: 20px;
        width: 100%;
    }
    .lock-box button {
        background: transparent;
        border: 1px solid #fff;
        color: #fff;
        padding: 10px 30px;
        border-radius: 30px;
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.3s;
    }
    .lock-box button:hover { background: #fff; color: #000; }
    .lock-error { margin-top: 10px; font-size: 0.85rem; color: #ff6b6b; display: none; }

    /* Carta Modal */
    #letter {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.95);
      display: none;
      align-items: flex-start;
      justify-content: center;
      z-index: 100;
      overflow-y: auto;
      padding: 2rem 1rem;
    }

    .letter-content {
      max-width: 600px;
      width: 100%;
      padding: 2.5rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 20px;
      background: rgba(20, 20, 25, 0.95);
      backdrop-filter: blur(10px);
      position: relative;
      margin-top: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
    }

    .close-btn {
      position: absolute;
      top: 15px; right: 15px;
      background: transparent;
      border: 1px solid #fff;
      color: #fff;
      border-radius: 50%;
      width: 30px; height: 30px;
      cursor: pointer;
    }

    /* Comentarios */
    .comments-section {
      width: 100%;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      border: 1px solid rgba(255,255,255,0.2);
      z-index: 5;
    }

    .comments-section h2 { margin-bottom: 20px; font-weight: 400; text-align: center; }

    #commentForm { display: flex; flex-direction: column; gap: 10px; margin-bottom: 30px; }

    #commentInput {
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.3);
      color: #fff;
      padding: 12px;
      border-radius: 10px;
      font-family: 'Playfair Display', serif;
      min-height: 80px;
      resize: vertical;
    }

    #commentForm button {
      align-self: flex-end;
      background: transparent;
      border: 1px solid #fff;
      color: #fff;
      padding: 8px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }

    #commentForm button:hover { background: #fff; color: #000; }

    .comment-list { display: flex; flex-direction: column; gap: 15px; }

    .comment-item {
      padding: 15px;
      background: rgba(255,255,255,0.03);
      border-radius: 10px;
      border-left: 3px solid #fff;
    }

    .comment-date { font-size: 0.8rem; opacity: 0.6; margin-top: 5px; }

    @media (max-width: 768px) {
      .container { flex-direction: column; padding: 1rem; }
      .side { margin: 10px 0; }
    }

    @media (max-width: 480px) {
      header h1 { font-size: 1.2rem; }
      nav a { font-size: 0.75rem; margin: 4px; padding: 5px 8px; }
      .side p { font-size: 0.95rem; }
    }
  </style>
</head>
<body>

<div id="pageLock" class="page-lock">
    <div class="lock-box">
        <h2>REN'S ARCHIVE</h2>
        <input type="password" id="pinInput" placeholder="C√ìDIGO REQUERIDO">
        <button onclick="unlockPage()">Verificar Identidad</button>
        <div id="errorMsg" class="lock-error">IDENTIDAD NO VERIFICADA</div>
    </div>
</div>
  <div class="stars"></div>

  <header>
    <h1></h1>
  </header>

  <nav>
    <a href="index.html">Inicio</a>
    <a href="historia.html">L√≠nea de Tiempo</a>
    <a href="recuerdos.html">Archivo de Recuerdos</a>
  </nav>

  <div class="container">
    <div class="side">
      <p>Esto no es tanto comparado con el otro regalo pero espero que te haya encantado tambi√©n.</p>
      <p>""Nuestra dualidad es lo que nos hace √∫nicos, y es lo que me hace amarte tanto.""</p>
      <p>Lee y disfruta esto, quiz√°s no es lo que esperabas pero lo hice pensando plenamente en ti y en la forma que me amas</p>
    </div>

    <div class="center">
      <button id="openBtn">Abrir carta üíå</button>
    </div>

    <div class="side">
      <p>09 / 01 / 2026</p>
      <p>‚Äî A & N ‚Äî</p>

      <!-- üì¶ CONTENEDOR MULTIMEDIA -->
      <div class="media-container">
        <!-- 
          OPCIONES PARA PONER AQU√ç:

          1. PARA IMAGEN:
          <img src="TU_URL_DE_IMAGEN" alt="nosotros">

          2. PARA VIDEO (YouTube):
          <iframe width="100%" height="100%" src="https://www.youtube.com/embed/ID_DEL_VIDEO" frameborder="0" allowfullscreen></iframe>

          3. PARA VIDEO DIRECTO (Archivo):
          <video controls>
            <source src="TU_URL_DE_VIDEO.mp4" type="video/mp4">
          </video>

          4. PARA M√öSICA (Spotify):
          <iframe src="https://open.spotify.com/embed/track/ID_DE_LA_CANCION" width="100%" height="100%" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
        -->

        <!-- Actualmente con la imagen original: -->
        <img src="https://i.imgur.com/VzxoAj4.jpeg" alt="nosotros">
      </div>

      <p style="font-size: 0.8rem; margin-top: 15px; opacity: 0.5;">Cada cosa y cada detalle fueron programados y dise√±ados por mi para ti, espero te guste.</p>
    </div>
  </div>

  <div id="letter">
    <div class="letter-content">
      <button id="closeBtn" class="close-btn">‚úï</button>
      <h2 style="margin-bottom: 15px;">Preciosa</h2>
      <p style="line-height: 1.7;">Han pasado cuatro meses desde que comenzamos este vuelo juntos, y en todo este tiempo hemos vivido de todo: risas que se quedan grabadas en la memoria, silencios que a veces pesaban y nos hac√≠an dudar, discusiones que nos ense√±aron a entendernos mejor, momentos de distancia que parec√≠an largos pero que nunca rompieron lo que sentimos, y l√°grimas compartidas que me hicieron ver tu vulnerabilidad y tu fuerza al mismo tiempo; me has confiado cosas profundas de ti, me has permitido entrar en tu mundo y yo he intentado estar ah√≠ para ti en cada instante, siendo tu apoyo, tu refugio y tu compa√±ero, y siempre he sentido que somos el complemento perfecto, que nos equilibramos en nuestros defectos y nos potenciamos en nuestras virtudes, que incluso cuando algo duele o nos pone a prueba, seguimos avanzando juntos porque t√∫ haces tu mejor esfuerzo siempre, porque me das tu soporte constante, porque hemos aprendido a comunicar lo que sentimos aunque es complejo y a cuidar lo que tenemos, y todo eso, Nohelia, todo lo que somos y lo que hemos construido, me hace sentir que no hay otra persona en este mundo con quien quisiera compartir este viaje, que cada momento, cada detalle, cada mirada y cada gesto de ternura que me das, me hace admirarte y querer seguir construyendo esto contigo d√≠a tras d√≠a aunque yo muestre inestabilidad pero cada piloto necesita a su pareja de ala, y eso eres tu, y por eso hoy, al cumplir cuatro meses, quiero que sepas que cada instante, incluso los dif√≠ciles, han valido la pena porque me han acercado m√°s a ti y me han hecho sentir que juntos podemos con todo, que somos un equipo, que somos complices, que somos nosotros, y que no hay nada m√°s hermoso que sentir que alguien te elige y te conf√≠a su mundo, como t√∫ me lo has confiado a m√≠.</p>
      <p style="margin-top: 20px; text-align: right;">[Te amo mucho]</p>
    </div>
  </div>



  <section class="comments-section" id="adminSection" style="display: none; border: 2px solid #fff; margin-top: 60px;">
    <h2 style="color: #fff; font-weight: bold;">üíé Panel de Administraci√≥n (Solo para ti)</h2>
    <p style="margin-bottom: 15px; opacity: 0.8;">Aqu√≠ aparecer√°n todos los comentarios que ella te deje en tiempo real.</p>
    <div id="adminCommentList" class="comment-list">
      <!-- Los comentarios de ella aparecer√°n aqu√≠ -->
    </div>
    <button onclick="clearAllComments()" style="margin-top: 20px; background: rgba(255,0,0,0.2); border: 1px solid #ff4444; color: #ff4444; padding: 5px 15px; border-radius: 5px; cursor: pointer;">Borrar historial</button>
  </section>

  <script>
    // PIN de administrador para ver comentarios (puedes cambiarlo)
    const ADMIN_PIN = "0906"; 

    // Funci√≥n para mostrar el panel si eres t√∫
    function checkAdmin() {
      const ask = prompt("Introduce el PIN de acceso para ver los comentarios recibidos:");
      if (ask === ADMIN_PIN) {
        document.getElementById('adminSection').style.display = 'block';
        loadComments();
        alert("¬°Acceso concedido! Baja hasta el final de la p√°gina para ver los comentarios.");
      } else {
        alert("PIN incorrecto.");
      }
    }

    // Bot√≥n invisible o comando para activar el panel (puedes presionar 'a' en el teclado)
    window.addEventListener('keydown', (e) => {
      if (e.key === '/') checkAdmin(); 
    });

    function clearAllComments() {
      if(confirm("¬øSeguro que quieres borrar todos los comentarios?")) {
        localStorage.removeItem('comments_carta7');
        loadComments();
      }
    }

    // Modal Logic
    const modal = document.getElementById('letter');
    const openBtn = document.getElementById('openBtn');
    const closeBtn = document.getElementById('closeBtn');

    openBtn.onclick = () => {
      modal.style.display = 'flex';
      document.body.classList.add('modal-open');
      modal.scrollTop = 0; 
    };

    closeBtn.onclick = () => {
      modal.style.display = 'none';
      document.body.classList.remove('modal-open');
    };

    window.onclick = (e) => {
      if(e.target == modal) {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');
      }
    };

    // Comments Logic
    const form = document.getElementById('commentForm');
    const input = document.getElementById('commentInput');
    const list = document.getElementById('commentList');
    const adminList = document.getElementById('adminCommentList');

    // URL del servidor de comentarios
    const API_URL = window.location.origin.replace('5000', '3000') + '/api/comments';

    async function loadComments() {
      try {
        const response = await fetch(API_URL);
        const comments = await response.json();

        list.innerHTML = '';
        comments.forEach(c => {
          const div = document.createElement('div');
          div.className = 'comment-item';
          div.innerHTML = `<div>${c.text}</div><div class="comment-date">${c.date}</div>`;
          list.appendChild(div);
        });

        if (adminList) {
          adminList.innerHTML = list.innerHTML;
        }
      } catch (err) {
        console.error('Error cargando comentarios:', err);
      }
    }

    form.onsubmit = async (e) => {
      e.preventDefault();
      const text = input.value.trim();
      if(!text) return;

      const newComment = {
        text: text,
        date: new Date().toLocaleString()
      };

      try {
        await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(newComment)
        });
        input.value = '';
        loadComments();
        alert("¬°Comentario enviado con √©xito! ‚ù§Ô∏è");
      } catch (err) {
        alert("Hubo un error al enviar el comentario.");
      }
    };

    loadComments();
  </script>
  <script src="lock.js"></script>
</body>
</html>
